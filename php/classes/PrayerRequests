<?php
namespace SIM\PRAYER;
use SIM;

class PrayerRequests{
	public function __construct(){
		$this->tableName = "sim_prayers";
	}

  /**
	 * Creates the tables for this module
	 */
	public function createDbTables(){
		if ( !function_exists( 'maybe_create_table' ) ) {
			require_once ABSPATH . '/wp-admin/install-helper.php';
		}

		//only create db if it does not exist
		global $wpdb;
		$charsetCollate = $wpdb->get_charset_collate();

		//Main table
		$sql = "CREATE TABLE {$this->tableName} (
			id mediumint(9) NOT NULL AUTO_INCREMENT,
			post_id int
			date text
			user_id int
			prayer text
			PRIMARY KEY  (id)
		) $charsetCollate;";

		maybe_create_table($this->tableName, $sql );
	}

	public function getPrayerRequestsByDate($date){
	  global $wpdb;

		return $wpdb->get_col("select prayer from $this->tableName where date='$date'");
	}
	
	public function getPrayerRequestsByUserId($userId){
	  global $wpdb;

		return $wpdb->get_results("select * from $this->tableName where user_id='$userId'");
	}

	public function updateUserPrayerRequest($userId, $prayer){
		
	}
}